<script>
var graph = {
    "0" : {
        "1": 10,
        "2": 5
    },
    "1" : {
        "0": 12,
        "3": 5
    },
    "2" : {
        "1": 7,
        "3": 2
    },
    "3" : {
    }
}

function cleanReciprocicalVertices(graph) {
    countTransformations = 0;

    for (var i in graph) {
        for (var j in graph[i]) {
            if (i in graph[j]) {
                amount1 = graph[i][j];
                amount2 = graph[j][i];

                graph[i][j] = Math.max(0, amount1 - amount2);
                graph[j][i] = Math.max(0, amount2 - amount1);

                countTransformations++;
            }
        }
    }

console.log(graph);

    return [graph, countTransformations];
}

function cleanNullVertices(graph) {
    countTransformations = 0;

    for (var i in graph) {
        for (var j in graph[i]) {
            if (graph[i][j] == 0) {
                delete graph[i][j];

                countTransformations++;
            }
        }
    }

console.log(graph);

    return [graph, countTransformations];
}

function cleanTransitiveVertices(graph) {
    countTransformations = 0;

    for (var i in graph) {
        for (var j in graph[i]) {
            for (var k in graph[j]) {
                    amount1 = graph[i][j];
                    amount2 = graph[j][k];

                    console.log(graph[i]);

                    console.log(amount1);
                    console.log(amount2);

                    graph[i][j] = Math.max(0, amount1 - amount2);
                    graph[i][k] = Math.min(amount1, amount2);
                    graph[j][k] = Math.max(0, amount2 - amount1);

                    countTransformations++;
            }
        }
    }

    return [graph, countTransformations];
}

g1 = cleanReciprocicalVertices(graph)[0];
g2 = cleanNullVertices(graph)[0];
g3 = cleanReciprocicalVertices(graph)[0];
console.log(g1);
console.log(g2);
console.log(g3);

//console.log(cleanTransitiveVertices(cleanNullVertices(cleanReciprocicalVertices(graph)[0]))[0]);
</script>